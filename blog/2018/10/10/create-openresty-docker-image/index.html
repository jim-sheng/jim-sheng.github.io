<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="记录生活的每一滴"><title>手把手教你创建OpenResty Docker镜像 | 盛国存</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=2.0.1"><link rel="stylesheet" type="text/css" href="/css/highlight.css?v=2.0.1"><link rel="Shortcut Icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">手把手教你创建OpenResty Docker镜像</h1><a id="logo" href="/.">盛国存</a><p class="description">个人博客</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="Arama"></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h1 class="post-title">手把手教你创建OpenResty Docker镜像</h1><div class="post-meta"><a href="/blog/2018/10/10/create-openresty-docker-image/#comments" class="comment-count"></a><p><span class="date">Oct 10, 2018</span><span><i id="busuanzi_container_page_pv"><i id="busuanzi_value_page_pv"></i><i>点击</i></i></span></p></div><div class="post-content"><h2 id="0、前言"><a href="#0、前言" class="headerlink" title="0、前言"></a>0、前言</h2><blockquote>
<p>什么是 <code>Docker</code> 镜像 ？</p>
</blockquote>
<p><code>Docker</code> 就像往集装箱里装货物的码头工人那样，它把应用打包成具有某种标准规格的集装箱，用计算机领域的语言来说，这种按照一定规格封装的集装箱叫 <strong>「镜像」</strong> 。</p>
<blockquote>
<p><code>Docker</code> 镜像又有什么优势呢 ？</p>
</blockquote>
<p>统一的管理服务、持续交付、弹性计算 等等…</p>
<blockquote>
<p>如何创建一个镜像呢 ？</p>
</blockquote>
<p>下文会带你一起了解如何创建一个 <code>Docker</code> 镜像</p>
<h2 id="1、准备工作"><a href="#1、准备工作" class="headerlink" title="1、准备工作"></a>1、准备工作</h2><ul>
<li><p>你需要申请一个 <code>Docker hub</code> 账号，了解相关的基本操作</p>
</li>
<li><p>创建一个你自己的 <code>dockerfile</code> 文件夹</p>
</li>
<li><p>一个 <code>OpenResty</code> 的 <code>tar</code> 包， <code>openresty-1.11.2.1.tar.gz</code></p>
</li>
</ul>
<h2 id="2、步骤"><a href="#2、步骤" class="headerlink" title="2、步骤"></a>2、步骤</h2><blockquote>
<p>为了避免机器的权限问题，本次演示的所有操作都在 <code>root</code> 下进行</p>
</blockquote>
<h3 id="2-1、创建glibc镜像"><a href="#2-1、创建glibc镜像" class="headerlink" title="2.1、创建glibc镜像"></a>2.1、创建glibc镜像</h3><blockquote>
<p>目的： 修改时区信息的修改</p>
</blockquote>
<p>创建Dockerfile的文件夹 <code>alpine_glibc_2.23</code> ，我暂且先起这个名字，为什么这么起后面我会介绍。</p>
<p>为了避免网络问题，我先把几个必要的 <code>apk</code> 包直接放到本地。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-attr">[root@freeipa101 alpine_glibc_2.23]</span># <span class="selector-tag">ll</span></span><br><span class="line"><span class="selector-tag">total</span> 11768</span><br><span class="line"><span class="selector-tag">-rw-r--r--</span> 1 <span class="selector-tag">root</span> <span class="selector-tag">root</span> 2943700 <span class="selector-tag">Oct</span>  4 15<span class="selector-pseudo">:58</span> <span class="selector-tag">glibc-2</span><span class="selector-class">.23-r3</span><span class="selector-class">.apk</span></span><br><span class="line"><span class="selector-tag">-rw-r--r--</span> 1 <span class="selector-tag">root</span> <span class="selector-tag">root</span> 1751110 <span class="selector-tag">Oct</span>  4 15<span class="selector-pseudo">:58</span> <span class="selector-tag">glibc-bin-2</span><span class="selector-class">.23-r3</span><span class="selector-class">.apk</span></span><br><span class="line"><span class="selector-tag">-rw-r--r--</span> 1 <span class="selector-tag">root</span> <span class="selector-tag">root</span> 7326212 <span class="selector-tag">Oct</span>  4 15<span class="selector-pseudo">:58</span> <span class="selector-tag">glibc-i18n-2</span><span class="selector-class">.23-r3</span><span class="selector-class">.apk</span></span><br></pre></td></tr></table></figure>
<p>然后创建一个 <code>Dockerfile</code> 文件</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">vim Dockerfile</span></span><br></pre></td></tr></table></figure>
<figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">FROM alpine<span class="function">:latest</span></span><br><span class="line">MAINTAINER shengguocun&lt;hzshengguocun@corp.netease.com&gt;</span><br><span class="line">ENV LANG=C.UTF-8</span><br><span class="line">RUN apk update &amp;&amp; apk add tzdata &amp;&amp; ln -sf <span class="string">/usr/share/zoneinfo/Asia/Shanghai</span> <span class="string">/etc/localtime</span> &amp;&amp; <span class="keyword">echo</span> <span class="string">"Asia/Shanghai"</span> &gt; <span class="string">/etc/timezone</span></span><br><span class="line">COPY glibc-*<span class="string">.apk</span> <span class="string">/tmp/</span></span><br><span class="line">RUN apk upgrade <span class="params">--update</span> &amp;&amp; apk add <span class="params">--allow-untrusted</span> <span class="string">/tmp/</span>*<span class="string">.apk</span> &amp;&amp; rm -f <span class="string">/tmp/</span>*<span class="string">.apk</span> <span class="string">/var/cache/apk/</span>*</span><br></pre></td></tr></table></figure>
<p>保存退出，进行 <code>build</code> 操作</p>
<figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">[root@freeipa101 alpine_glibc_2.23]<span class="comment"># docker build .</span></span><br><span class="line">Sending build context to Docker daemon  12.03MB</span><br><span class="line">Step 1/6 : FROM alpine<span class="function">:latest</span></span><br><span class="line"> <span class="params">---</span>&gt; 196d12cf6ab1</span><br><span class="line">Step 2/6 : MAINTAINER shengguocun&lt;hzshengguocun@corp.netease.com&gt;</span><br><span class="line"> <span class="params">---</span>&gt; Using cache</span><br><span class="line"> <span class="params">---</span>&gt; 87a5241dd00b</span><br><span class="line">Step 3/6 : ENV LANG=C.UTF-8</span><br><span class="line"> <span class="params">---</span>&gt; Using cache</span><br><span class="line"> <span class="params">---</span>&gt; 5529e89cde7e</span><br><span class="line">Step 4/6 : RUN apk update &amp;&amp; apk add tzdata &amp;&amp; ln -sf <span class="string">/usr/share/zoneinfo/Asia/Shanghai</span> <span class="string">/etc/localtime</span> &amp;&amp; <span class="keyword">echo</span> <span class="string">"Asia/Shanghai"</span> &gt; <span class="string">/etc/timezone</span></span><br><span class="line"> <span class="params">---</span>&gt; Running in 069c8e8<span class="keyword">cd</span>948</span><br><span class="line">fetch http:<span class="string">//dl-cdn.alpinelinux.org/alpine/v3.8/main/x86_64/APKINDEX.tar.gz</span></span><br><span class="line">fetch http:<span class="string">//dl-cdn.alpinelinux.org/alpine/v3.8/community/x86_64/APKINDEX.tar.gz</span></span><br><span class="line">v3.8.1-22-g24d67bab3a [http:<span class="string">//dl-cdn.alpinelinux.org/alpine/v3.8/main</span>]</span><br><span class="line">v3.8.1-16-g96e1e57fed [http:<span class="string">//dl-cdn.alpinelinux.org/alpine/v3.8/community</span>]</span><br><span class="line">OK: 9539 distinct packages available</span><br><span class="line"><span class="params">(1/1)</span> Installing tzdata <span class="params">(2018d-r1)</span></span><br><span class="line">Executing busybox-1.28.4-r1.trigger</span><br><span class="line">OK: 8 MiB in 14 packages</span><br><span class="line">Removing intermediate container 069c8e8<span class="keyword">cd</span>948</span><br><span class="line"> <span class="params">---</span>&gt; 1af55928a1c5</span><br><span class="line">Step 5/6 : COPY glibc-*<span class="string">.apk</span> <span class="string">/tmp/</span></span><br><span class="line"> <span class="params">---</span>&gt; 490259033ddd</span><br><span class="line">Step 6/6 : RUN apk upgrade <span class="params">--update</span> &amp;&amp; apk add <span class="params">--allow-untrusted</span> <span class="string">/tmp/</span>*<span class="string">.apk</span> &amp;&amp; rm -f <span class="string">/tmp/</span>*<span class="string">.apk</span> <span class="string">/var/cache/apk/</span>*</span><br><span class="line"> <span class="params">---</span>&gt; Running in b8b7ef2ec402</span><br><span class="line">OK: 8 MiB in 14 packages</span><br><span class="line"><span class="params">(1/4)</span> Installing glibc <span class="params">(2.23-r3)</span></span><br><span class="line"><span class="params">(2/4)</span> Installing libgcc <span class="params">(6.4.0-r9)</span></span><br><span class="line"><span class="params">(3/4)</span> Installing glibc-bin <span class="params">(2.23-r3)</span></span><br><span class="line"><span class="params">(4/4)</span> Installing glibc-i18n <span class="params">(2.23-r3)</span></span><br><span class="line">Executing glibc-bin-2.23-r3.trigger</span><br><span class="line">OK: 24 MiB in 18 packages</span><br><span class="line">Removing intermediate container b8b7ef2ec402</span><br><span class="line"> <span class="params">---</span>&gt; 216a3982623d</span><br><span class="line">Successfully built 216a3982623d</span><br></pre></td></tr></table></figure>
<p>现在查看一下刚刚 <code>build</code> 出来的镜像</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@freeipa101 alpine_glibc_2<span class="number">.23</span>]# docker images</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">&lt;none&gt;              &lt;none&gt;              <span class="number">216</span>a3982623d        <span class="number">10</span> seconds ago      <span class="number">34.7</span>MB</span><br><span class="line">nginx               latest              be1f31be9a87        <span class="number">37</span> hours ago        <span class="number">109</span>MB</span><br><span class="line">alpine              latest              <span class="number">196</span>d12cf6ab1        <span class="number">3</span> weeks ago         <span class="number">4.41</span>MB</span><br></pre></td></tr></table></figure>
<p><code>&lt;none&gt;</code> 就是刚刚打出的镜像，这时候我们需要给他进行重命名，通过 <code>docker tag --help</code> 查看相关的使用</p>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@freeipa101 alpine_glibc_2.<span class="number">23</span>]<span class="comment"># docker tag --help</span></span><br><span class="line"></span><br><span class="line">Usage:	docker <span class="keyword">tag</span> <span class="title">SOURCE_IMAGE</span>[:<span class="keyword">TAG</span>] TARGET_IMAGE[:<span class="keyword">TAG</span>]</span><br><span class="line"></span><br><span class="line">Create a <span class="keyword">tag</span> <span class="title">TARGET_IMAGE</span> that refers to SOURCE_IMAGE</span><br></pre></td></tr></table></figure>
<figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="symbol">@freeipa101</span> alpine_glibc_2<span class="number">.23</span>]<span class="meta"># docker tag 216a3982623d docker.io/ricksheng/apline_glibc:2.23</span></span><br></pre></td></tr></table></figure>
<p>最后一步，跟 <code>GitHub</code> 提交代码一样将镜像推到 <code>Docker hub</code> 上</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-attr">[root@freeipa101 alpine_glibc_2.23]</span># <span class="selector-tag">docker</span> <span class="selector-tag">push</span> <span class="selector-tag">docker</span><span class="selector-class">.io</span>/<span class="selector-tag">ricksheng</span>/<span class="selector-tag">apline_glibc</span><span class="selector-pseudo">:2.23</span></span><br><span class="line"><span class="selector-tag">The</span> <span class="selector-tag">push</span> <span class="selector-tag">refers</span> <span class="selector-tag">to</span> <span class="selector-tag">repository</span> <span class="selector-attr">[docker.io/ricksheng/apline_glibc]</span></span><br><span class="line"><span class="selector-tag">cad05933e86e</span>: <span class="selector-tag">Pushing</span> <span class="selector-attr">[========================&gt;                          ]</span>  <span class="selector-tag">7</span><span class="selector-class">.813MB</span>/<span class="selector-tag">15</span><span class="selector-class">.67MB</span></span><br><span class="line"><span class="selector-tag">a531be207876</span>: <span class="selector-tag">Pushing</span> <span class="selector-attr">[========================================&gt;          ]</span>  <span class="selector-tag">9</span><span class="selector-class">.842MB</span>/<span class="selector-tag">12</span><span class="selector-class">.02MB</span></span><br><span class="line"><span class="selector-tag">cad05933e86e</span>: <span class="selector-tag">Pushing</span> <span class="selector-attr">[==========================================&gt;        ]</span>  <span class="selector-tag">13</span><span class="selector-class">.31MB</span>/<span class="selector-tag">15</span><span class="selector-class">.67MB</span></span><br><span class="line"><span class="selector-tag">cad05933e86e</span>: <span class="selector-tag">Pushed</span></span><br><span class="line"></span><br><span class="line"><span class="selector-tag">2</span><span class="selector-class">.23</span>: <span class="selector-tag">digest</span>: <span class="selector-tag">sha256</span><span class="selector-pseudo">:1823a0b6171a4182416322e0360ef75230cb0491a3d70ab8cc370535c0c035d8</span> <span class="selector-tag">size</span>: <span class="selector-tag">1161</span></span><br></pre></td></tr></table></figure>
<p>到这里为止，一个简单的镜像就创建完毕了。</p>
<h3 id="2-2、创建gcc镜像"><a href="#2-2、创建gcc镜像" class="headerlink" title="2.2、创建gcc镜像"></a>2.2、创建gcc镜像</h3><p>和上面类似，创建一个 <code>alpine_gcc</code> 文件夹，然后创建一个 <code>Dockerfile</code> 文件</p>
<figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="symbol">@freeipa101</span> alpine_gcc]<span class="meta"># vim Dockerfile</span></span><br></pre></td></tr></table></figure>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">FROM docker.io<span class="regexp">/ricksheng/</span><span class="string">apline_glibc:</span><span class="number">2.23</span></span><br><span class="line">MAINTAINER shengguocun&lt;hzshengguocun<span class="meta">@corp</span>.netease.com&gt;</span><br><span class="line">RUN apk --no-cahe add make g++ libevent openssl-dev libevent-dev linux-headers &amp;&amp; rm -rf <span class="regexp">/var/</span>cache<span class="regexp">/apk/</span>*</span><br></pre></td></tr></table></figure>
<p>进行 <code>build</code> 操作</p>
<figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">[root@freeipa101 alpine_gcc]# docker build .</span><br><span class="line">Sending build context to Docker daemon  <span class="number">2.</span>048kB</span><br><span class="line">Step <span class="number">1</span>/<span class="number">3</span> : FROM docker.io/ricksheng/apline_glibc:<span class="number">2.23</span></span><br><span class="line"> ---&gt; 216a3982623d</span><br><span class="line">Step <span class="number">2</span>/<span class="number">3</span> : MAINTAINER shengguocun&lt;hzshengguocun@corp.netease.com&gt;</span><br><span class="line"> ---&gt; Running <span class="keyword">in</span> 88133daefd42</span><br><span class="line">Removing intermediate container 88133daefd42</span><br><span class="line"> ---&gt; 622169df1d2d</span><br><span class="line">Step <span class="number">3</span>/<span class="number">3</span> : RUN apk --no-cahe <span class="keyword">add</span> make g++ libevent openssl-dev libevent-dev linux-headers &amp;&amp; rm -rf /var/cache/apk/*</span><br><span class="line"> ---&gt; Running <span class="keyword">in</span> a0cade3d8d68</span><br><span class="line"><span class="symbol">apk:</span> unrecognized <span class="meta">option</span>: no-cahe</span><br><span class="line">fetch http://<span class="built_in">dl</span>-cdn.alpinelinux.org/alpine/v3<span class="meta">.8</span>/main/x86_64/APKINDEX.tar.gz</span><br><span class="line">fetch http://<span class="built_in">dl</span>-cdn.alpinelinux.org/alpine/v3<span class="meta">.8</span>/community/x86_64/APKINDEX.tar.gz</span><br><span class="line">(<span class="number">1</span>/<span class="number">31</span>) Installing libstdc++ (<span class="number">6.4</span><span class="meta">.0</span>-<span class="built_in">r9</span>)</span><br><span class="line">(<span class="number">2</span>/<span class="number">31</span>) Installing binutils (<span class="number">2.30</span>-<span class="built_in">r5</span>)</span><br><span class="line">(<span class="number">3</span>/<span class="number">31</span>) Installing gmp (<span class="number">6.1</span><span class="meta">.2</span>-<span class="built_in">r1</span>)</span><br><span class="line">(<span class="number">4</span>/<span class="number">31</span>) Installing isl (<span class="number">0.18</span>-<span class="built_in">r0</span>)</span><br><span class="line">(<span class="number">5</span>/<span class="number">31</span>) Installing libgomp (<span class="number">6.4</span><span class="meta">.0</span>-<span class="built_in">r9</span>)</span><br><span class="line">(<span class="number">6</span>/<span class="number">31</span>) Installing libatomic (<span class="number">6.4</span><span class="meta">.0</span>-<span class="built_in">r9</span>)</span><br><span class="line">(<span class="number">7</span>/<span class="number">31</span>) Installing pkgconf (<span class="number">1.5</span><span class="meta">.3</span>-<span class="built_in">r0</span>)</span><br><span class="line">(<span class="number">8</span>/<span class="number">31</span>) Installing mpfr3 (<span class="number">3.1</span><span class="meta">.5</span>-<span class="built_in">r1</span>)</span><br><span class="line">(<span class="number">9</span>/<span class="number">31</span>) Installing mpc1 (<span class="number">1.0</span><span class="meta">.3</span>-<span class="built_in">r1</span>)</span><br><span class="line">(<span class="number">10</span>/<span class="number">31</span>) Installing gcc (<span class="number">6.4</span><span class="meta">.0</span>-<span class="built_in">r9</span>)</span><br><span class="line">(<span class="number">11</span>/<span class="number">31</span>) Installing musl-dev (<span class="number">1.1</span><span class="meta">.19</span>-<span class="built_in">r10</span>)</span><br><span class="line">(<span class="number">12</span>/<span class="number">31</span>) Installing libc-dev (<span class="number">0.7</span><span class="meta">.1</span>-<span class="built_in">r0</span>)</span><br><span class="line">(<span class="number">13</span>/<span class="number">31</span>) Installing g++ (<span class="number">6.4</span><span class="meta">.0</span>-<span class="built_in">r9</span>)</span><br><span class="line">(<span class="number">14</span>/<span class="number">31</span>) Installing libevent (<span class="number">2.1</span><span class="meta">.8</span>-<span class="built_in">r5</span>)</span><br><span class="line">(<span class="number">15</span>/<span class="number">31</span>) Installing libbz2 (<span class="number">1.0</span><span class="meta">.6</span>-<span class="built_in">r6</span>)</span><br><span class="line">(<span class="number">16</span>/<span class="number">31</span>) Installing expat (<span class="number">2.2</span><span class="meta">.5</span>-<span class="built_in">r0</span>)</span><br><span class="line">(<span class="number">17</span>/<span class="number">31</span>) Installing libffi (<span class="number">3.2</span><span class="meta">.1</span>-<span class="built_in">r4</span>)</span><br><span class="line">(<span class="number">18</span>/<span class="number">31</span>) Installing gdbm (<span class="number">1.13</span>-<span class="built_in">r1</span>)</span><br><span class="line">(<span class="number">19</span>/<span class="number">31</span>) Installing ncurses-terminfo-base (<span class="number">6.</span><span class="number">1_p20180818</span>-<span class="built_in">r1</span>)</span><br><span class="line">(<span class="number">20</span>/<span class="number">31</span>) Installing ncurses-terminfo (<span class="number">6.</span><span class="number">1_p20180818</span>-<span class="built_in">r1</span>)</span><br><span class="line">(<span class="number">21</span>/<span class="number">31</span>) Installing ncurses-libs (<span class="number">6.</span><span class="number">1_p20180818</span>-<span class="built_in">r1</span>)</span><br><span class="line">(<span class="number">22</span>/<span class="number">31</span>) Installing readline (<span class="number">7.0</span><span class="meta">.003</span>-<span class="built_in">r0</span>)</span><br><span class="line">(<span class="number">23</span>/<span class="number">31</span>) Installing sqlite-libs (<span class="number">3.24</span><span class="meta">.0</span>-<span class="built_in">r0</span>)</span><br><span class="line">(<span class="number">24</span>/<span class="number">31</span>) Installing python2 (<span class="number">2.7</span><span class="meta">.15</span>-<span class="built_in">r1</span>)</span><br><span class="line">(<span class="number">25</span>/<span class="number">31</span>) Installing libevent-dev (<span class="number">2.1</span><span class="meta">.8</span>-<span class="built_in">r5</span>)</span><br><span class="line">(<span class="number">26</span>/<span class="number">31</span>) Installing linux-headers (<span class="number">4.4</span><span class="meta">.6</span>-<span class="built_in">r2</span>)</span><br><span class="line">(<span class="number">27</span>/<span class="number">31</span>) Installing make (<span class="number">4.2</span><span class="meta">.1</span>-<span class="built_in">r2</span>)</span><br><span class="line">(<span class="number">28</span>/<span class="number">31</span>) Installing zlib-dev (<span class="number">1.2</span><span class="meta">.11</span>-<span class="built_in">r1</span>)</span><br><span class="line">(<span class="number">29</span>/<span class="number">31</span>) Installing libcrypto1<span class="meta">.0</span> (<span class="number">1.0</span>.<span class="number">2p</span>-<span class="built_in">r0</span>)</span><br><span class="line">(<span class="number">30</span>/<span class="number">31</span>) Installing libssl1<span class="meta">.0</span> (<span class="number">1.0</span>.<span class="number">2p</span>-<span class="built_in">r0</span>)</span><br><span class="line">(<span class="number">31</span>/<span class="number">31</span>) Installing openssl-dev (<span class="number">1.0</span>.<span class="number">2p</span>-<span class="built_in">r0</span>)</span><br><span class="line">Executing busybox-<span class="number">1.28</span><span class="meta">.4</span>-<span class="built_in">r1</span>.trigger</span><br><span class="line">Executing glibc-bin-<span class="number">2.23</span>-<span class="built_in">r3</span>.trigger</span><br><span class="line"><span class="symbol">OK:</span> <span class="number">255</span> MiB <span class="keyword">in</span> <span class="number">49</span> packages</span><br><span class="line">Removing intermediate container a0cade3d8d68</span><br><span class="line"> ---&gt; d7a938e82e4e</span><br><span class="line">Successfully built d7a938e82e4e</span><br></pre></td></tr></table></figure>
<p>查看生成的镜像</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@freeipa101 alpine_gcc]# docker images</span><br><span class="line">REPOSITORY               TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">&lt;none&gt;                   &lt;none&gt;              d7a938e82e4e        <span class="number">30</span> seconds ago      <span class="number">248</span>MB</span><br><span class="line">ricksheng/apline_glibc   <span class="number">2.23</span>                <span class="number">216</span>a3982623d        <span class="number">9</span> minutes ago       <span class="number">34.7</span>MB</span><br><span class="line">nginx                    latest              be1f31be9a87        <span class="number">37</span> hours ago        <span class="number">109</span>MB</span><br><span class="line">alpine                   latest              <span class="number">196</span>d12cf6ab1        <span class="number">3</span> weeks ago         <span class="number">4.41</span>MB</span><br></pre></td></tr></table></figure>
<figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="symbol">@freeipa101</span> alpine_gcc]<span class="meta"># docker tag d7a938e82e4e docker.io/ricksheng/alpine_gcc:6.4.0</span></span><br></pre></td></tr></table></figure>
<figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="title">@freeipa101</span> alpine_gcc]# docker push  docker.io/ricksheng/alpine_gcc:<span class="number">6.4</span>.<span class="number">0</span></span><br><span class="line">The push refers <span class="keyword">to</span> repository [docker.io/ricksheng/alpine_gcc]</span><br><span class="line"><span class="keyword">c</span><span class="number">8</span>cb<span class="number">354e6402</span>: Pushing [======&gt;                                            ]  <span class="number">25.93</span>MB/<span class="number">213.2</span>MB</span><br><span class="line"><span class="keyword">c</span><span class="number">8</span>cb<span class="number">354e6402</span>: Pushing [==========&gt;                                        ]  <span class="number">44.56</span>MB/<span class="number">2</span><span class="keyword">c</span><span class="number">8</span>cb<span class="number">354e6402</span>: Pushing  <span class="number">47.85</span>MB/<span class="number">213</span>.<span class="keyword">c</span><span class="number">8</span>cb<span class="number">354e6402</span>: Pushing [===============&gt;                                   ]  <span class="number">67.65</span>MB/<span class="number">213.2</span>MB</span><br><span class="line"><span class="keyword">c</span><span class="number">8</span>cb<span class="number">354e6402</span>: Pushing [=============================&gt;                     ]  <span class="number">126.9</span>MB/<span class="number">213.2</span>MB</span><br><span class="line"><span class="keyword">c</span><span class="number">8</span>cb<span class="number">354e6402</span>: Pushed</span><br><span class="line">df<span class="number">64</span>d<span class="number">3292</span>fd<span class="number">6</span>: Mounted from ricksheng/apline_glibc</span><br><span class="line"></span><br><span class="line"><span class="number">6.4</span>.<span class="number">0</span>: digest: sha<span class="number">256</span>:<span class="number">7</span>da<span class="number">0e8489</span>ff<span class="number">7</span>d<span class="number">1e0041</span>b<span class="number">3</span>edfa<span class="number">57</span>f<span class="number">1</span>fb<span class="number">8039</span>fb<span class="number">9</span>cd<span class="number">98</span>d<span class="number">01600471</span>a<span class="number">2</span>f<span class="number">29</span>f<span class="number">9</span>fdd<span class="number">0</span><span class="keyword">c</span><span class="number">6</span> size: <span class="number">1373</span></span><br></pre></td></tr></table></figure>
<p>到这里为止，创建 <code>OpenResty</code> 镜像的准备工作都OK了，下面开始吧。</p>
<h3 id="2-3、创建openresty镜像"><a href="#2-3、创建openresty镜像" class="headerlink" title="2.3、创建openresty镜像"></a>2.3、创建openresty镜像</h3><p>老规矩，创建 <code>alpine_openresty/1.11.2.1</code> 目录，同时创建 <code>Dockerfile</code> 文件以及一个 <code>nginx.conf</code> 文件</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-attr">[root@freeipa101 1.11.2.1]</span># <span class="selector-tag">ll</span></span><br><span class="line"><span class="selector-tag">total</span> 3852</span><br><span class="line"><span class="selector-tag">-rw-r--r--</span> 1 <span class="selector-tag">root</span> <span class="selector-tag">root</span>     570 <span class="selector-tag">Oct</span>  4 16<span class="selector-pseudo">:31</span> <span class="selector-tag">Dockerfile</span></span><br><span class="line"><span class="selector-tag">-rw-r--r--</span> 1 <span class="selector-tag">root</span> <span class="selector-tag">root</span>    1114 <span class="selector-tag">Oct</span>  4 16<span class="selector-pseudo">:23</span> <span class="selector-tag">nginx</span><span class="selector-class">.conf</span></span><br><span class="line"><span class="selector-tag">-rw-r--r--</span> 1 <span class="selector-tag">root</span> <span class="selector-tag">root</span> 3930804 <span class="selector-tag">Oct</span>  4 16<span class="selector-pseudo">:21</span> <span class="selector-tag">openresty-1</span><span class="selector-class">.11</span><span class="selector-class">.2</span><span class="selector-class">.1</span><span class="selector-class">.tar</span><span class="selector-class">.gz</span></span><br></pre></td></tr></table></figure>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">worker_processes  1;</span><br><span class="line">error_log logs/error.log;</span><br><span class="line">events &#123;</span><br><span class="line">    worker_connections 1024;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">http &#123;</span><br><span class="line">   <span class="built_in"> server </span>&#123;</span><br><span class="line">        listen 80;</span><br><span class="line">        location / &#123;</span><br><span class="line">            default_type text/html;</span><br><span class="line"></span><br><span class="line">            content_by_lua_block &#123;</span><br><span class="line">                ngx.say(<span class="string">"HelloWorld"</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">vim Dockerfile</span></span><br></pre></td></tr></table></figure>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> docker.io/ricksheng/alpine_gcc:<span class="number">6.4</span>.<span class="number">0</span></span><br><span class="line"><span class="keyword">MAINTAINER</span> shengguocun&lt;hzshengguocun@corp.netease.com&gt;</span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> apk add --update perl openssl openssl-dev pcre-dev make gcc musl-dev</span></span><br><span class="line"><span class="bash">EXPOSE 80 443</span></span><br><span class="line"><span class="bash">ENV VERSION=1.11.2.1</span></span><br><span class="line"><span class="bash">ADD openresty-<span class="variable">$VERSION</span>.tar.gz /usr/<span class="built_in">local</span>/src</span></span><br><span class="line"><span class="bash">RUN <span class="built_in">cd</span> /usr/<span class="built_in">local</span>/src/openresty-<span class="variable">$VERSION</span> &amp;&amp; ./configure --prefix=/usr/<span class="built_in">local</span> --with-http_v2_module --with-http_ssl_module &amp;&amp; make -j4 &amp;&amp; make install &amp;&amp; rm -rf /usr/<span class="built_in">local</span>/src/openresty-<span class="variable">$VERSION</span> &amp;&amp; rm -f /var/cache/apk/*</span></span><br><span class="line"><span class="bash">ADD nginx.conf /usr/<span class="built_in">local</span>/nginx/conf</span></span><br><span class="line"><span class="bash">ENTRYPOINT [<span class="string">"/usr/local/nginx/sbin/nginx"</span>, <span class="string">"-g"</span>, <span class="string">"daemon off;"</span>]</span></span><br></pre></td></tr></table></figure>
<p>进行 <code>Build</code> 操作（ make的输出太长就不贴出来了 ）, 完成后查看一下</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@freeipa101 <span class="number">1.11</span><span class="number">.2</span><span class="number">.1</span>]# docker images</span><br><span class="line">REPOSITORY               TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">&lt;none&gt;                   &lt;none&gt;              <span class="number">65</span>b5f5a29c4d        <span class="number">27</span> seconds ago      <span class="number">336</span>MB</span><br><span class="line">ricksheng/alpine_gcc     <span class="number">6.4</span><span class="number">.0</span>               d7a938e82e4e        <span class="number">20</span> minutes ago      <span class="number">248</span>MB</span><br><span class="line">ricksheng/apline_glibc   <span class="number">2.23</span>                <span class="number">216</span>a3982623d        <span class="number">29</span> minutes ago      <span class="number">34.7</span>MB</span><br><span class="line">nginx                    latest              be1f31be9a87        <span class="number">37</span> hours ago        <span class="number">109</span>MB</span><br><span class="line">alpine                   latest              <span class="number">196</span>d12cf6ab1        <span class="number">3</span> weeks ago         <span class="number">4.41</span>MB</span><br></pre></td></tr></table></figure>
<figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@freeipa101 <span class="number">1.11</span><span class="meta">.2</span><span class="meta">.1</span>]# docker tag 65b5f5a29c4d docker.io/ricksheng/openresty:<span class="number">1.11</span><span class="meta">.2</span><span class="meta">.1</span></span><br></pre></td></tr></table></figure>
<figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@freeipa101 <span class="number">1.11</span><span class="meta">.2</span><span class="meta">.1</span>]# docker <span class="keyword">push</span> docker.io/ricksheng/openresty:<span class="number">1.11</span><span class="meta">.2</span><span class="meta">.1</span></span><br></pre></td></tr></table></figure>
<p>到这里为止，我们的镜像就已经打完了，那如何验证呢？</p>
<h3 id="2-4、验证-amp-调试"><a href="#2-4、验证-amp-调试" class="headerlink" title="2.4、验证 &amp; 调试"></a>2.4、验证 &amp; 调试</h3><p>首先你需要做一下身份认证， <code>docker login</code></p>
<figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@freeipa101 ~]<span class="meta"># docker login</span></span><br><span class="line">Login <span class="keyword">with</span> your Docker ID <span class="keyword">to</span> push <span class="keyword">and</span> pull images <span class="keyword">from</span> Docker Hub. <span class="keyword">If</span> you don<span class="comment">'t have a Docker ID, head over to https://hub.docker.com to create one.</span></span><br><span class="line">Username (shengguocun@gmail.com): ricksheng</span><br><span class="line">Password:</span><br><span class="line">Login Succeeded</span><br></pre></td></tr></table></figure>
<p>登录完成之后，你的用户名、密码会以一个 <code>base64</code> 的字符串记录在本地，然后我们需要将镜像拉到本地</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@freeipa101 ~]# docker pull ricksheng/openresty:<span class="number">1.11</span>.<span class="number">2.1</span></span><br><span class="line"><span class="number">1.11</span>.<span class="number">2.1</span>: Pulling from ricksheng/openresty</span><br><span class="line">Diges<span class="variable">t:</span> <span class="built_in">sha256</span>:<span class="number">12067</span>a9651f3148f2f916c19681c1bd95783b172e65adc36dcb303903fede11b</span><br><span class="line">Statu<span class="variable">s:</span> Image <span class="keyword">is</span> <span class="keyword">up</span> <span class="keyword">to</span> date <span class="keyword">for</span> ricksheng/openresty:<span class="number">1.11</span>.<span class="number">2.1</span></span><br></pre></td></tr></table></figure>
<p>运行这个镜像</p>
<figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="title">@freeipa101</span> ~]# docker run -d -p <span class="number">8887</span>:<span class="number">80</span> --name demo<span class="number">001</span> ricksheng/openresty:<span class="number">1.11</span>.<span class="number">2.1</span></span><br><span class="line"><span class="number">6</span>b<span class="number">798</span>d<span class="number">8</span>b<span class="number">9</span>cbf<span class="number">8393151766</span>ab<span class="number">46</span>bfad<span class="number">37342</span>aaf<span class="number">793402841e36</span>befc<span class="number">99</span><span class="keyword">c</span><span class="number">4</span>a<span class="number">5</span><span class="keyword">c</span><span class="number">2</span><span class="keyword">c</span><span class="number">9</span></span><br></pre></td></tr></table></figure>
<p>最后验证一下，请求宿主机的 IP + 端口</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-attr">[root@freeipa101 ~]</span># <span class="selector-tag">curl</span> 127<span class="selector-class">.0</span><span class="selector-class">.0</span><span class="selector-class">.1</span><span class="selector-pseudo">:8887</span></span><br><span class="line"><span class="selector-tag">HelloWorld</span></span><br></pre></td></tr></table></figure>
<p>到这一个完整的创建 <code>OpenResty</code> 的 <code>Docker</code> 镜像的流程就结束了，当然在实际创建镜像的过程中会遇到各种各样的问题，我们需要进入到容器中进行调试。当然新手要注意的一件事 <strong>“容器就是容器，不要把容器当虚拟机”</strong> 。</p>
</div><div class="tags"><a href="/tags/OpenResty/">OpenResty</a><a href="/tags/Docker/">Docker</a></div><div class="post-share"><div class="bdsharebuttonbox"><span style="float:left;line-height: 28px;height: 28px;font-size:16px;font-weight:blod">分享到：</span><a href="#" data-cmd="more" class="bds_more"></a><a href="#" data-cmd="mshare" title="分享到一键分享" class="bds_mshare"></a><a href="#" data-cmd="fbook" title="分享到Facebook" class="bds_fbook"></a><a href="#" data-cmd="twi" title="分享到Twitter" class="bds_twi"></a><a href="#" data-cmd="linkedin" title="分享到linkedin" class="bds_linkedin"></a><a href="#" data-cmd="youdao" title="分享到有道云笔记" class="bds_youdao"></a><a href="#" data-cmd="evernotecn" title="分享到印象笔记" class="bds_evernotecn"></a><a href="#" data-cmd="weixin" title="分享到微信" class="bds_weixin"></a><a href="#" data-cmd="qzone" title="分享到QQ空间" class="bds_qzone"></a><a href="#" data-cmd="tsina" title="分享到新浪微博" class="bds_tsina"></a></div></div><div class="post-nav"><a href="/blog/2018/10/23/lapis-getting-started/" class="pre">Lapis-快速开始</a><a href="/blog/2018/09/19/quick-start-Vanilla-lua-web-framework/" class="next">Vanilla （lua web framework）中文文档 [2018.09.19]</a></div><div id="comments"><div id="lv-container" data-id="city" data-uid="MTAyMC8zNjk1MS8xMzQ4Nw=="></div></div></div></div></div><div class="layout-r"><div id="sidebar"><div class="search-pla"></div><div id="toc" class="widget"><div class="widget-title"><i class="fa fa-fei">文章目录</i></div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#0、前言"><span class="toc-text">0、前言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1、准备工作"><span class="toc-text">1、准备工作</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2、步骤"><span class="toc-text">2、步骤</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1、创建glibc镜像"><span class="toc-text">2.1、创建glibc镜像</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2、创建gcc镜像"><span class="toc-text">2.2、创建gcc镜像</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3、创建openresty镜像"><span class="toc-text">2.3、创建openresty镜像</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4、验证-amp-调试"><span class="toc-text">2.4、验证 &amp; 调试</span></a></li></ol></li></ol></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/blog/2018/10/25/lapis-creating-configuration/">lapis-配置和环境</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2018/10/23/Lapis-request-and-action/">Lapis-Request和Action</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2018/10/23/lapis-getting-started-with-lua/">创建一个Lua版本的Lapis项目</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2018/10/23/lapis-getting-started/">Lapis-快速开始</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2018/10/10/create-openresty-docker-image/">手把手教你创建OpenResty Docker镜像</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2018/09/19/quick-start-Vanilla-lua-web-framework/">Vanilla （lua web framework）中文文档 [2018.09.19]</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2018/08/01/nginx-book/">Nginx</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2018/05/18/automatic-investment-plan-by-golang/">基于Go语言的简易基金定投系统</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2018/04/20/a-bite-of-golang/">A Bite of Golang</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2018/03/15/taste-gdb/">GDB抓虫之旅</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-biao"> 标签</i></div><div class="tagcloud"><a href="/tags/Docker/" style="font-size: 15px;">Docker</a> <a href="/tags/lapis/" style="font-size: 15px;">lapis</a> <a href="/tags/Go语言/" style="font-size: 15px;">Go语言</a> <a href="/tags/基金/" style="font-size: 15px;">基金</a> <a href="/tags/定投/" style="font-size: 15px;">定投</a> <a href="/tags/OpenResty/" style="font-size: 15px;">OpenResty</a> <a href="/tags/Lua/" style="font-size: 15px;">Lua</a> <a href="/tags/Lapis/" style="font-size: 15px;">Lapis</a> <a href="/tags/Nginx/" style="font-size: 15px;">Nginx</a> <a href="/tags/基础概念/" style="font-size: 15px;">基础概念</a> <a href="/tags/GDB/" style="font-size: 15px;">GDB</a> <a href="/tags/入门/" style="font-size: 15px;">入门</a> <a href="/tags/Vanilla中文文档/" style="font-size: 15px;">Vanilla中文文档</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-archive"> 归档</i></div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">十月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">九月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">八月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">五月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">四月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">三月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">一月 2018</a></li></ul></div></div></div></div><a id="totop" href="#top"></a><div id="footer"><div class="footer-info"><p><a href="/baidusitemap.xml">Baidu Site Haritası</a> |  <a href="/atom.xml">订阅</a> |  <a href="/about/">关于</a></p><p>本站总访问量：<i id="busuanzi_container_site_pv"><i id="busuanzi_value_site_pv"></i></i>次</p><p><span> Copyright &copy;<a href="/." rel="nofollow">ShengGuocun.</a></span><span> Theme by<a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> BlueLake.</a></span><span> Count by<a href="http://busuanzi.ibruce.info/"> busuanzi.</a></span><span> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></span></p></div></div></div><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?e3ed45ce04d57be9fec7dd674aec65e0";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
  })();
</script><script type="text/javascript" src="/js/search.json.js?v=2.0.1"></script><script type="text/javascript" src="/js/toctotop.js?v=2.0.1" async></script><script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":["mshare","weixin","tsina","qzone","linkedin","fbook","twi","print","renren","sqq","evernotecn","bdysc","tqq","tqf","bdxc","kaixin001","tieba","douban","bdhome","thx","ibaidu","meilishuo","mogujie","diandian","huaban","duitang","hx","fx","youdao","sdo","qingbiji","people","xinhua","mail","isohu","yaolan","wealink","ty","iguba","h163","copy"],"bdPic":"","bdStyle":"1","bdSize":"16"},"share":{},"image":{"viewList":["tsina","qzone","weixin","fbook","twi","linkedin","youdao","evernotecn","mshare"],"viewText":"分享到：","viewSize":"16"},"selectShare":{"bdContainerClass":null,"bdSelectMiniList":["tsina","qzone","weixin","fbook","twi","linkedin","youdao","evernotecn","mshare"]}};with(document)0[(getElementsByTagName('head')[0]||head).appendChild(createElement('script')).src='/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
</script><script>(function(d, s) {
  var j, e = d.getElementsByTagName('body')[0];
  if (typeof LivereTower === 'function') { return; }
  j = d.createElement(s);
  j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
  j.async = true;
  e.appendChild(j);
})(document, 'script');
</script></body></html>